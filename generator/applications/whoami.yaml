name: whoami
appVersion: 1.9.0
description: Tiny Go webserver that prints os information and HTTP request to output
home: https://github.com/traefik/whoami
source: https://github.com/traefik/whoami
version: 4.0.0
components:
  - name: whoami
    deployment:
      type: deployment
      container:
        env: |
          - name: WHOAMI_PORT_NUMBER
            value: {{ .Values.containerPorts.http | quote }}
        livenessProbe:
          httpGet:
            path: /health
        readinessProbe:
          httpGet:
            path: /health
    image:
      registry: docker.io
      repository: traefik/whoami
      tag: v1.9.0
    ingress: true
    service:
      ports:
        - name: http
tests: |
  import requests


  def test_service_connection():
      url = "http://{{ include "whoami.fullname" . }}:{{ .Values.service.ports.http }}/"

      response = requests.get(url)

      assert response.status_code == 200
