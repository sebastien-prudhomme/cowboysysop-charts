
name: vertical-pod-autoscaler
productName: Vertical Pod Autoscaler
appVersion: 0.14.0
description: is a <<set of components that automatically adjust the amount of CPU and memory requested by pods running in the Kubernetes Cluster>>
home: https://github.com/kubernetes/autoscaler
icon: https://raw.githubusercontent.com/kubernetes/kubernetes/master/logo/logo.svg
license: 2020
source: https://github.com/kubernetes/autoscaler
version: 8.0.0
prerequisites: |
  - Kubernetes >= 1.22
  - Metrics Server >= 0.2 (you can use the [bitnami/metrics-server](https://artifacthub.io/packages/helm/bitnami/metrics-server) chart)
updates: |
  ### Upgrading to version 8.0.0

  Some parameters related to port management have been modified:

  - Parameter `service.port` has been renamed `service.ports.http`.
  - Parameter `service.nodePort` has been renamed `service.nodePorts.http`.

  ### Upgrading to version 7.0.0

  Some parameters related to image management have been modified:

  - Registry prefix in `image.repository` parameters is now configured in `image.registry`.
  - Parameter `imagePullSecrets` has been renamed `global.imagePullSecrets`.

  ### Upgrading to version 6.0.0

  The application version is no more compatible with Kubernetes 1.19, 1.20 and 1.21.

  ### Upgrading to version 5.0.0

  The application validates that all fields that specify CPU and memory have supported resolution:

  - CPU is a whole number of milli CPUs
  - Memory is a whole number of bytes

  ### Upgrading to version 4.0.0

  The application version is no more compatible with Kubernetes 1.16.

  Custom resource definitions are now created and upgraded with a pre-install/pre-upgrade job.

  ### Upgrading to version 3.0.0

  The chart is no more compatible with Helm 2.

  Refer to the [Helm documentation](https://helm.sh/docs/topics/v2_v3_migration/) for more information.

  ### Upgrading to version 2.0.0

  The port names have been changed to be compatible with Istio service mesh.
components:
  - name: updater
    optional: true
    deployment:
      type: deployment
      container:
        livenessProbe:
          httpGet:
            path: /health-check
        readinessProbe:
          httpGet:
            path: /health-check
    image:
      registry: registry.k8s.io
      repository: autoscaling/vpa-updater
      tag: 0.14.0
tests: |
  import requests


  def test_admission_controller_service_connection():
      # url = "https://{{ include "vertical-pod-autoscaler.admissionController.fullname" . }}.{{ .Release.Namespace }}.svc:{{ .Values.admissionController.service.port }}/"
      url = "https://vpa-webhook.{{ .Release.Namespace }}.svc:443/"
      verify = "/admission-controller-tls-secret/ca.crt"

      response = requests.get(url, verify=verify)

      assert response.status_code == 200


  def test_admission_controller_metrics_service_connection():
      url = "http://{{ include "vertical-pod-autoscaler.admissionController.metrics.fullname" . }}:{{ .Values.admissionController.metrics.service.port }}/metrics"

      response = requests.get(url)

      assert response.status_code == 200


  def test_recommender_metrics_service_connection():
      url = "http://{{ include "vertical-pod-autoscaler.recommender.metrics.fullname" . }}:{{ .Values.recommender.metrics.service.port }}/metrics"

      response = requests.get(url)

      assert response.status_code == 200


  def test_updater_metrics_service_connection():
      url = "http://{{ include "vertical-pod-autoscaler.updater.metrics.fullname" . }}:{{ .Values.updater.metrics.service.port }}/metrics"

      response = requests.get(url)

      assert response.status_code == 200
